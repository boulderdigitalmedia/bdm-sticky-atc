<div
  id="bdm-sticky-atc"
  class="bdm-sticky-atc"
  aria-hidden="false"
  data-product-page="true"
  style="
    --bdm-bg: {{ settings.bar_background_color | default: '#FAFAF9' }};
    --bdm-text: {{ settings.text_color | default: '#000000' }};
    --bdm-font-size: {{ settings.font_size | default: 14 }}px;
    --bdm-button-bg: {{ settings.button_background_color | default: '#111111' }};
    --bdm-button-text: {{ settings.button_text_color | default: '#FFFFFF' }};
  "
>
  <div class="bdm-inner">
    <div class="bdm-left">
      <!-- ALWAYS RENDER, HIDE VIA STYLE -->
      <div
        id="bdm-title"
        style="{% unless settings.show_product_title %}display:none{% endunless %}"
      >
        <!-- placeholder for editor -->
        <span class="bdm-placeholder">Product title</span>
      </div>

      <div
        id="bdm-price"
        style="{% unless settings.show_price %}display:none{% endunless %}"
      >
        <span class="bdm-placeholder">$0.00</span>
      </div>
    </div>

    <div class="bdm-right">
      <input
        id="bdm-qty"
        type="number"
        min="1"
        value="1"
        aria-label="Quantity"
        style="{% unless settings.show_quantity_selector %}display:none{% endunless %}"
      />

      <button
        id="bdm-atc"
        type="button"
        class="
          bdm-button
          {{ settings.button_size | default: 'medium' }}
          bdm-button--{{ settings.button_style | default: 'solid' }}
        "
      >
        {{ settings.button_text | default: 'Add to cart' }}
      </button>
    </div>
  </div>
</div>

<link rel="stylesheet" href="{{ 'sticky-atc-bar.css' | asset_url }}">
<script src="{{ 'sticky-atc-bar.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Sticky Add To Cart Bar",
  "target": "body",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_product_title",
      "label": "Show product title",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_price",
      "label": "Show price",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_quantity_selector",
      "label": "Show quantity selector",
      "default": true
    },

    {
      "type": "color",
      "id": "bar_background_color",
      "label": "Bar background color",
      "default": "#FAFAF9"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Font size",
      "min": 12,
      "max": 20,
      "step": 1,
      "default": 14
    },

    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "options": [
        { "value": "solid", "label": "Solid" },
        { "value": "outline", "label": "Outline" }
      ],
      "default": "solid"
    },

    {
      "type": "select",
      "id": "button_size",
      "label": "Button size",
      "options": [
        { "value": "small", "label": "Small" },
        { "value": "medium", "label": "Medium" },
        { "value": "large", "label": "Large" }
      ],
      "default": "medium"
    },

    {
      "type": "color",
      "id": "button_background_color",
      "label": "Button background color",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#FFFFFF"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Add to cart"
    }
  ]
}
{% endschema %}
